<style type="text/css" media="screen">
    /* Put your CSS styling here */
    .section {
        border-bottom: 1px solid #ccc;
        margin-bottom: 50px;
        padding-bottom: 50px;
        width: 930px;
        font-size: 15px;
    }

    thead {
        background-color: #FFC000;
        font-weight: bold;
        text-align: center;
    }

    .report-header {
        text-align: center;
        font-size: 20px;
        font-weight: bold;
        margin-bottom: 50px;
    }

    table {
        margin-left: auto;
        margin-right: auto;
    }
</style>

<script type="text/javascript">

    // Put your javascript functions here 

    $(document).ready(function () {
        var date = new Date(dhis2.report.date);
        var orgUnit = dhis2.report.organisationUnit;
        var today = new Date();

        console.log(dhis2.report);
        console.log(orgUnit);
        const orgUnitData = fetch("../api/organisationUnitGroups/hT9sMYwIFgZ")
            .then((response) => response.json())
            .then((data) => {
                return data;
            });
        const orgUnitDataDetails = async () => {
            const data = await orgUnitData;
            const basicFacilities = data.organisationUnits;
            const searchResults = basicFacilities.find((basicFacilities) => basicFacilities.id == orgUnit.id);

            if (typeof searchResults !== 'undefined') {
                console.log(searchResults);
                $.get("../api/dataElementGroups.json?fields=id,name,dataElements&filter=id:in:[qXJfnzutsQF,bmL0X9z660x,QMl3f0HJQfQ,ZpbM6OHwPKe,mgee2h9D8gZ,AxgalzESGMb,e6dGGxhNma2,bgU1dCGAmsq,O9LuqhTuRqy,ODs03ymlwyn,apJ3ar0jXq6,AIT3jqgJEM4,RC7E5frWOTE,hac4oO0zsFB,u7luGu7HsvP,J2cWQnL3ZPX]", function (data) {
                    $("#total10").html(data.dataElementGroups[0].dataElements.length - 2);
                    $("#total11").html(data.dataElementGroups[1].dataElements.length - 1);
                    $("#total12").html(data.dataElementGroups[2].dataElements.length - 1);
                    $("#total13").html(data.dataElementGroups[3].dataElements.length - 2);
                    $("#total16").html(data.dataElementGroups[4].dataElements.length - 1);
                    $("#total17").html(data.dataElementGroups[5].dataElements.length - 2);
                    $("#total18").html('--');
                    $("#total19").html('--');
                    $("#total20").html(data.dataElementGroups[8].dataElements.length - 1);
                    $("#total21").html(data.dataElementGroups[9].dataElements.length - 2);
                    $("#total23").html(data.dataElementGroups[10].dataElements.length - 1);
                    $("#total25").html('--');
                    $("#total27").html('--');
                    $("#total28").html(data.dataElementGroups[13].dataElements.length - 5);
                    $("#total3").html(data.dataElementGroups[14].dataElements.length - 2);
                    $("#total4").html(data.dataElementGroups[15].dataElements.length - 1);
                });
            } else {
                console.log("This is a complete Facility");
                $.get("../api/dataElementGroups.json?fields=id,name,dataElements&filter=id:in:[qXJfnzutsQF,bmL0X9z660x,QMl3f0HJQfQ,ZpbM6OHwPKe,mgee2h9D8gZ,AxgalzESGMb,e6dGGxhNma2,bgU1dCGAmsq,O9LuqhTuRqy,ODs03ymlwyn,apJ3ar0jXq6,AIT3jqgJEM4,RC7E5frWOTE,hac4oO0zsFB,u7luGu7HsvP,J2cWQnL3ZPX]", function (data) {
                    $("#total10").html(data.dataElementGroups[0].dataElements.length);
                    $("#total11").html(data.dataElementGroups[1].dataElements.length);
                    $("#total12").html(data.dataElementGroups[2].dataElements.length);
                    $("#total13").html(data.dataElementGroups[3].dataElements.length);
                    $("#total16").html(data.dataElementGroups[4].dataElements.length);
                    $("#total17").html(data.dataElementGroups[5].dataElements.length);
                    $("#total18").html(data.dataElementGroups[6].dataElements.length);
                    $("#total19").html(data.dataElementGroups[7].dataElements.length);
                    $("#total20").html(data.dataElementGroups[8].dataElements.length);
                    $("#total21").html(data.dataElementGroups[9].dataElements.length);
                    $("#total23").html(data.dataElementGroups[10].dataElements.length);
                    $("#total25").html(data.dataElementGroups[11].dataElements.length);
                    $("#total27").html(data.dataElementGroups[12].dataElements.length);
                    $("#total28").html(data.dataElementGroups[13].dataElements.length);
                    $("#total3").html(data.dataElementGroups[14].dataElements.length);
                    $("#total4").html(data.dataElementGroups[15].dataElements.length);
                });
            }
        };
        orgUnitDataDetails();
        $.get("../api/dataElementGroups.json?fields=id,name,dataElements&filter=id:in:[jQU8W2XYRzi,KhjsVhQo7LN,OV51KyWFTy4,QS3hul1dltX,SjFwfdDdG5g,Nlr6RX0GEg0,aXKLRdZjxOd,rM1ldmwyhs2,DlD54Q5SQZh,g2jrTKbIqWK,gGpw5TKKM9l,Cj3imG9eyxt]", function (data) {
            $("#total1").html(data.dataElementGroups[0].dataElements.length);
            $("#total14").html(data.dataElementGroups[1].dataElements.length);
            $("#total15").html(data.dataElementGroups[2].dataElements.length);
            $("#total2").html(data.dataElementGroups[3].dataElements.length);
            $("#total22").html(data.dataElementGroups[4].dataElements.length);
            $("#total24").html(data.dataElementGroups[5].dataElements.length);
            $("#total26").html(data.dataElementGroups[6].dataElements.length);
            $("#total5").html(data.dataElementGroups[7].dataElements.length);
            $("#total6").html(data.dataElementGroups[8].dataElements.length);
            $("#total7").html(data.dataElementGroups[9].dataElements.length);
            $("#total8").html(data.dataElementGroups[10].dataElements.length);
            $("#total9").html(data.dataElementGroups[11].dataElements.length);

        });

        $("#orgUnit").html(orgUnit.name);
        $("#date").html(date.getDate() + "/" + (date.getMonth() + 1) + "/" + date.getFullYear());
        $("#today").html(today);
        var fullYear = date.getFullYear();
        var month = date.getMonth() + 1;
        var quarter = getQuarter(month);
        var period = fullYear + quarter;

    });
    function getQuarter(month) {
        if (month == 1 || month == 2 || month == 3) {
            return 'Q1';
        } else if (month == 4 || month == 5 || month == 6) {
            return 'Q2';
        } else if (month == 7 || month == 8 || month == 9) {
            return 'Q3';
        } else if (month == 10 || month == 11 || month == 12) {
            return 'Q4';
        }
    }
    function score(areaValue) {
        if (areaValue >= 80) {
            return "Bom";
        } else if (areaValue >= 60) {
            return "Médio";
        } else {
            return "Mau";
        }
    }
</script>

<div>

    <!-- Put your HTML mark-up here -->
    <header class="report-header">
        <img src="http://nuvem.jembi.org:44981/api/documents/gAtyR6qt1eC/data" height="80px" alt="Emblema">
        <p>República De Moçambique</p>
        <hr>
        <p>Ministério Da Saúde</p>
        <p>Percentagem de critérios de verificação alcançados por padrão</p>
    </header>

    <p>
        <b>Período de Avaliação:</b><span id="date"></span>
    </p>
    <p>
        <b>Local: </b> <span id="orgUnit"></span>
    </p>
    <table class="table">
        <thead>
            <tr>
                <th rowspan="2">Área</th>
                <th rowspan="2">Padrões</th>
                <th colspan="3">Critérios</th>
                <th rowspan="2">Resultado da Avaliação (x/y * 100)</th>
            </tr>
            <tr>
                <th>Total de Critérios</th>
                <th>Observados (x)</th>
                <th>Alcançados (y)</th>
            </tr>
        </thead>
        <tbody>
            <tr ri="0">
                <td rv="I. Disponibilidade de cuidados pós VBG ">
                    I. Disponibilidade de cuidados pós VBG </td>
                <td rv="------">Padrão 1</td>
                <td rv="------"><span id="total1"></span></td>
                <td rv="------"><span id="observed1"></span></td>
                <td rv="------"><span id="achieved1"></span></td>
                <td rv="------"><span id="results1"></span></td>
            </tr>
            <tr ri="1">
                <td rv="II. Materiais e Infraestruturas " rowspan="2">
                    II. Materiais e Infraestruturas </td>
                <td rv="------">Padrão 2</td>
                <td rv="------"><span id="total2"></span></td>
                <td rv="------"><span id="observed2"></span></td>
                <td rv="------"><span id="achieved2"></span></td>
                <td rv="------"><span id="results2"></span></td>
            </tr>
            <tr ri="1">
                <td rv="------">Padrão 3</td>
                <td rv="------"><span id="total3"></span></td>
                <td rv="------"><span id="observed3"></span></td>
                <td rv="------"><span id="achieved3"></span></td>
                <td rv="------"><span id="results3"></span></td>
            </tr>
            <tr ri="2">
                <td rv="III. Identificação Precoce de Vítimas de Violência  " rowspan="3">
                    III. Identificação Precoce de Vítimas de Violência </td>
                <td rv="------">Padrão 4</td>
                <td rv="------"><span id="total4"></span></td>
                <td rv="------"><span id="observed4"></span></td>
                <td rv="------"><span id="achieved4"></span></td>
                <td rv="------"><span id="results4"></span></td>
            </tr>
            <tr ri="1">
                <td rv="------">Padrão 5</td>
                <td rv="------"><span id="total5"></span></td>
                <td rv="------"><span id="observed5"></span></td>
                <td rv="------"><span id="achieved5"></span></td>
                <td rv="------"><span id="results5"></span></td>
            </tr>
            <tr ri="1">
                <td rv="------">Padrão 6</td>
                <td rv="------"><span id="total6"></span></td>
                <td rv="------"><span id="observed6"></span></td>
                <td rv="------"><span id="achieved6"></span></td>
                <td rv="------"><span id="results6"></span></td>
            </tr>
            <tr ri="3">
                <td rv="IV. Cuidados Clí&shy;nicos Centrados no Utente" rowspan="11">
                    IV. Cuidados Clí&shy;nicos Centrados no Utente </td>
                <td rv="------">Padrão 7</td>
                <td rv="------"><span id="total7"></span></td>
                <td rv="------"><span id="observed7"></span></td>
                <td rv="------"><span id="achieved7"></span></td>
                <td rv="------"><span id="results7"></span></td>
            </tr>
            <tr ri="1">
                <td rv="------">Padrão 8</td>
                <td rv="------"><span id="total8"></span></td>
                <td rv="------"><span id="observed8"></span></td>
                <td rv="------"><span id="achieved8"></span></td>
                <td rv="------"><span id="results8"></span></td>
            </tr>
            <tr ri="1">
                <td rv="------">Padrão 9</td>
                <td rv="------"><span id="total9"></span></td>
                <td rv="------"><span id="observed9"></span></td>
                <td rv="------"><span id="achieved9"></span></td>
                <td rv="------"><span id="results9"></span></td>
            </tr>
            <tr ri="1">
                <td rv="------">Padrão 10</td>
                <td rv="------"><span id="total10"></span></td>
                <td rv="------"><span id="observed10"></span></td>
                <td rv="------"><span id="achieved10"></span></td>
                <td rv="------"><span id="results10"></span></td>
            </tr>
            <tr ri="1">
                <td rv="------">Padrão 11</td>
                <td rv="------"><span id="total11"></span></td>
                <td rv="------"><span id="observed11"></span></td>
                <td rv="------"><span id="achieved11"></span></td>
                <td rv="------"><span id="results11"></span></td>
            </tr>
            <tr ri="1">
                <td rv="------">Padrão 12</td>
                <td rv="------"><span id="total12"></span></td>
                <td rv="------"><span id="observed12"></span></td>
                <td rv="------"><span id="achieved12"></span></td>
                <td rv="------"><span id="results12"></span></td>
            </tr>
            <tr ri="1">
                <td rv="------">Padrão 13</td>
                <td rv="------"><span id="total13"></span></td>
                <td rv="------"><span id="observed13"></span></td>
                <td rv="------"><span id="achieved13"></span></td>
                <td rv="------"><span id="results13"></span></td>
            </tr>
            <tr ri="1">
                <td rv="------">Padrão 14</td>
                <td rv="------"><span id="total14"></span></td>
                <td rv="------"><span id="observed14"></span></td>
                <td rv="------"><span id="achieved14"></span></td>
                <td rv="------"><span id="results14"></span></td>
            </tr>
            <tr ri="1">
                <td rv="------">Padrão 15</td>
                <td rv="------"><span id="total15"></span></td>
                <td rv="------"><span id="observed15"></span></td>
                <td rv="------"><span id="achieved15"></span></td>
                <td rv="------"><span id="results15"></span></td>
            </tr>
            <tr ri="1">
                <td rv="------">Padrão 16</td>
                <td rv="------"><span id="total16"></span></td>
                <td rv="------"><span id="observed16"></span></td>
                <td rv="------"><span id="achieved16"></span></td>
                <td rv="------"><span id="results16"></span></td>
            </tr>
            <tr ri="1">
                <td rv="------">Padrão 17</td>
                <td rv="------"><span id="total17"></span></td>
                <td rv="------"><span id="observed17"></span></td>
                <td rv="------"><span id="achieved17"></span></td>
                <td rv="------"><span id="results17"></span></td>
            </tr>
            <tr ri="4">
                <td rv="V. Medicina Legal" rowspan="2">
                    V. Medicina Legal </td>
                <td rv="------">Padrão 18</td>
                <td rv="------"><span id="total18"></span></td>
                <td rv="------"><span id="observed18"></span></td>
                <td rv="------"><span id="achieved18"></span></td>
                <td rv="------"><span id="results18"></span></td>
            </tr>
            <tr ri="1">
                <td rv="------">Padrão 19</td>
                <td rv="------"><span id="total19"></span></td>
                <td rv="------"><span id="observed19"></span></td>
                <td rv="------"><span id="achieved19"></span></td>
                <td rv="------"><span id="results19"></span></td>
            </tr>
            <tr ri="5">
                <td rv="VI. Sistema de Referência e Seguimento da Vítima " rowspan="2">
                    VI. Sistema de Referência e Seguimento da Vítima </td>
                <td rv="------">Padrão 20</td>
                <td rv="------"><span id="total20"></span></td>
                <td rv="------"><span id="observed20"></span></td>
                <td rv="------"><span id="achieved20"></span></td>
                <td rv="------"><span id="results20"></span></td>
            </tr>
            <tr ri="1">
                <td rv="------">Padrão 21</td>
                <td rv="------"><span id="total21"></span></td>
                <td rv="------"><span id="observed21"></span></td>
                <td rv="------"><span id="achieved21"></span></td>
                <td rv="------"><span id="results21"></span></td>
            </tr>
            <tr ri="6">
                <td rv="VII. Formação e Melhoria de Qualidade " rowspan="2">
                    VII. Formação e Melhoria de Qualidade </td>
                <td rv="------">Padrão 22</span></td>
                <td rv="------"><span id="total22"></span></td>
                <td rv="------"><span id="observed22"></span></td>
                <td rv="------"><span id="achieved22"></span></td>
                <td rv="------"><span id="results22"></span></td>
            </tr>
            <tr ri="1">
                <td rv="------">Padrão 23</td>
                <td rv="------"><span id="total23"></span></td>
                <td rv="------"><span id="observed23"></span></td>
                <td rv="------"><span id="achieved23"></span></td>
                <td rv="------"><span id="results23"></span></td>
            </tr>
            <tr ri="7">
                <td rv="VIII. Politicas de Cuidados de Saúde">
                    VIII. Politicas de Cuidados de Saúde </td>
                <td rv="------">Padrão 24</td>
                <td rv="------"><span id="total24"></span></td>
                <td rv="------"><span id="observed24"></span></td>
                <td rv="------"><span id="achieved24"></span></td>
                <td rv="------"><span id="results24"></span></td>
            </tr>
            <tr ri="8">
                <td rv="IX. Criação de Demanda Para Uso de Cuidados Pos Violência ">
                    IX. Criação de Demanda Para Uso de Cuidados Pos Violência </td>
                <td rv="------">Padrão 25</span></td>
                <td rv="------"><span id="total25"></span></td>
                <td rv="------"><span id="observed25"></span></td>
                <td rv="------"><span id="achieved25"></span></td>
                <td rv="------"><span id="results25"></span></td>
            </tr>
            <tr ri="9">
                <td rv="X. Reporte e Sistemas de Informação " rowspan="3">
                    X. Reporte e Sistemas de Informação </td>
                <td rv="------">Padrão 26</td>
                <td rv="------"><span id="total26"></span></td>
                <td rv="------"><span id="observed26"></span></td>
                <td rv="------"><span id="achieved26"></span></td>
                <td rv="------"><span id="results26"></span></td>
            </tr>
            <tr ri="1">
                <td rv="------">Padrão 27</td>
                <td rv="------"><span id="total27"></span></td>
                <td rv="------"><span id="observed27"></span></td>
                <td rv="------"><span id="achieved27"></span></td>
                <td rv="------"><span id="results27"></span></td>
            </tr>
            <tr ri="1">
                <td rv="------">Padrão 28</td>
                <td rv="------"><span id="total28"></span></td>
                <td rv="------"><span id="observed28"></span></td>
                <td rv="------"><span id="achieved28"></span></td>
                <td rv="------"><span id="results28"></span></td>
            </tr>
        </tbody>
    </table>
    <p><b>Data de Geração:</b><span id="today"></span></p>
    <p><b>Source:</b><span id="today"></span></p>

</div>